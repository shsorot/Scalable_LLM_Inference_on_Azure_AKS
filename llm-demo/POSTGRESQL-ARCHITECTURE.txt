# PostgreSQL Architecture Summary

## Current Configuration - PostgreSQL Only

### Components:
1. PostgreSQL StatefulSet (k8s/06-postgres.yaml)
   - Image: postgres:16-alpine
   - Resources: 256Mi-1Gi RAM, 250m-1000m CPU
   - Storage: 10Gi Azure Disk Premium
   - Service: postgres.ollama.svc.cluster.local:5432

2. Open-WebUI (k8s/07-webui-deployment.yaml)
   - Connected to PostgreSQL via DATABASE_URL
   - User data on Azure Files Standard (50Gi)
   - No SQLite database

### Storage Layout:
- Ollama: Azure Files Premium (1024Gi) - LLM models
- PostgreSQL: Azure Disk Premium (10Gi) - Database
- WebUI: Azure Files Standard (50Gi) - Uploads/cache

### Monthly Cost:
- Ollama storage: ~$136
- PostgreSQL storage: ~$2.30
- WebUI storage: ~$0.75
- Total: ~$139/month

### Benefits:
 No SQLite file locking issues
 Proper database architecture
 Better reliability for production
 All storage optimized for purpose

### Files Present:
 06-postgres.yaml - PostgreSQL deployment
 07-webui-deployment.yaml - WebUI with DATABASE_URL
 03-storage-standard.yaml - WebUI user data
 02-storage-postgres.yaml - DELETED (unused)
 04-storage-webui-disk.yaml - DELETED (SQLite removed)
